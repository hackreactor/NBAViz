angular.module('mean.chart')
  .controller('mainCtrl', function AppCtrl ($scope) {
    $scope.lebron = {
      "_id": "52b88d55f7c62cfa5fbed7f4",
      "Player": "LeBron James",
      "Team": "MIA",
      "Position": "SF",
      "Hollinger_MPG": 35.5,
      "Hollinger_PF": 38,
      "Hollinger_PFPG": 1.5,
      "Hollinger_PFP48M": 2.1,
      "PF_per_MIN": 0,
      "Hollinger_FLAG": 0,
      "Hollinger_TECH": 0,
      "Hollinger_EJECT": 0,
      "GP": 25,
      "MIN_per_game": 35.7,
      "Total_MIN": 892.5,
      "STL_per_game": 1.5,
      "Total_STL": 37.5,
      "STL_per_MIN": 0.0420168067,
      "BLK_per_game": 0.3,
      "Total_BLK": 8,
      "BLK_per_MIN": 0.0089635854,
      "Opp_FGM_at_Rim_per_game": 1.3,
      "Total_Opp_FGM_at_Rim": 32.5,
      "Opp_FGM_at_Rim_per_min": 0.0364145658,
      "Opp_FGA_at_Rim_per_game": 2.6,
      "Total_Opp_FGA_at_Rim": 65,
      "Opp_FGA_at_Rim_per_Minute": 0.0728291317,
      "Opp_FGP_at_Rim": 0.52,
      "Catch_and_Shoot_Total_PTS": 79,
      "Catch_and_Shoot_PTS_per_game": 3.2,
      "Catch_and_Shoot_PTS_per_Minute": 0.0896358543,
      "Catch_and_Shoot_FGM_per_game": 1.1,
      "Total_Catch_and_Shoot_FGM": 27.5,
      "Catch_and_Shoot_FGM_per_Minute": 0.0308123249,
      "Catch_and_Shoot_FGA_per_game": 2,
      "Total_Catch_and_Shoot_FGA": 50,
      "Catch_and_Shoot_FGA_per_Minute": 0.056022409,
      "Catch_and_Shoot_FG_PCT": 0.571,
      "Catch_and_Shoot_3FGM_per_game": 0.9,
      "Total_Catch_and_Shoot_3FGM": 22.5,
      "Catch_and_Shoot_3FGM_per_Minute": 0.025210084,
      "Catch_and_Shoot_3FGA_per_game": 1.6,
      "Total_Catch_and_Shoot_3FGA": 40,
      "Catch_and_Shoot_3FGA_per_Minute": 0.0448179272,
      "Catch_and_Shoot_3FG_PCT": 0.575,
      "Catch_and_Shoot_eFG_PCT": 0.806,
      "REB_per_game": 6.8,
      "Total_REB": 171,
      "REB_per_Minute": 0.1915966387,
      "Percentage_of_rebounds_per_chance": 0.731,
      "REB_Chances_per_game": 9.4,
      "Total_REB_Chances": 235,
      "REB_Chances_per_Minute": 0.2633053221,
      "Contested_REB_per_game": 1.6,
      "Total_Contested_REB": 40,
      "Contested_REB_per_Minute": 0.0448179272,
      "Uncontested_REB_per_game": 5.2,
      "Total_Uncontested_REB": 130,
      "Uncontested_REB_per_Minute": 0.1456582633,
      "Contested_REB_Percentage": 0.234,
      "Distance_Traveled_Per_Game_miles": 2.3,
      "Distance_Traveled_total_miles": 56.8,
      "Distance_Traveled_per_Minute": 0.0636414566,
      "Average_Speed_mph": 3.8,
      "Distance_Traveled_Per_48_Minutes_miles": 3.1,
      "Pull_Up_Shots_Total_PTS": 88,
      "Pull_Up_Shots_PTS_per_game": 3.5,
      "Pull_Up_Shots_PTS_per_Minute": 0.0980392157,
      "Pull_Up_Shots_FGM_per_game": 1.7,
      "Total_Pull_Up_Shots_FGM": 42.5,
      "Pull_Up_Shots_FGM_per_Minute": 0.0476190476,
      "Pull_Up_Shots_FGA_per_game": 4.8,
      "Total_Pull_Up_Shots_FGA": 120,
      "Pull_Up_Shots_FGA_per_Minute": 0.1344537815,
      "Pull_Up_Shots_FG_PCT": 0.35,
      "Pull_Up_Shots_FG3M_per_game": 0.2,
      "Total_Pull_Up_Shots_FG3M": 5,
      "Pull_Up_Shots_FG3M_per_Minute": 0.0056022409,
      "Pull_Up_Shots_FG3A_per_game": 0.8,
      "Total_Pull_Up_Shots_FG3A": 20,
      "Pull_Up_Shots_FG3A_per_Minute": 0.0224089636,
      "Pull_Up_Shots_FG3_PCT": 0.19,
      "Pull_Up_Shots_EFG_PCT": 0.367,
      "PTS_per_game": 25.2,
      "Total_PTS": 630,
      "PTS_per_Minute": 0.7058823529,
      "Drives_PTS_per_game": 4.4,
      "Total_Drives_PTS": 110,
      "Drives_PTS_per_Minute": 0.1232492997,
      "Drives_FG_PCT": 0.615,
      "Close_Shots_PTS_per_game": 3,
      "Total_Close_Shots_PTS": 75,
      "Close_Shots_PTS_per_Minute": 0.0840336134,
      "Close_Shots_FG_PCT": 0.711,
      "Total_Catch_and_Shoot_PTS": 80,
      "Total_Pull_Up_Shots_PTS": 87.5,
      "eFG_PCT": 0.636,
      "FG_PCT_on_Drives": 0.615,
      "Drives_Per_Game": 5.9,
      "Total_Drives": 148,
      "Drives_per_Minute": 0.1658263305,
      "Player_PPG_on_Drives": 4.4,
      "Total_Player_PTS_on_Drives": 109,
      "Player_PTS_on_Drives_per_Minute": 0.1221288515,
      "Team_PPG_on_Drives": 6.8,
      "Total_Team_Points_on_Drives": 170,
      "Team_Points_on_Drives_per_Minute": 0.1904761905,
      "PTS_Per_48_Min_on_Drives": 5.9,
      "AST_per_game": 6.5,
      "Total_AST": 163,
      "AST_per_Minute": 0.1826330532,
      "Passes_per_game": 48.4,
      "Total_Passes": 1210,
      "Passes_per_Minute": 1.3557422969,
      "FT_Assists_per_game": 0.4,
      "Total_FT_Assists": 10,
      "FT_Assists_per_Minute": 0.0112044818,
      "Secondary_Assists_per_game": 1.2,
      "Total_Secondary_Assists": 30,
      "Secondary_Assists_per_Minute": 0.0336134454,
      "Assist_opportunities_per_game": 11.6,
      "Total_Assist_opportunities": 290,
      "Assist_opportunities_per_Minute": 0.324929972,
      "Points_created_by_assist_per_game": 15.7,
      "Total_Points_created_by_assist": 392.5,
      "Points_created_by_assist_per_Minute": 0.4397759104,
      "Points_Created_by_AST_Per_48_Min": 21.1,
      "Touches_per_game": 72.2,
      "Total_Touches": 1805,
      "Touches_per_Minute": 2.0224089636,
      "Front_Court_Touches_per_game": 59.8,
      "Total_Front_Court_Touches": 1495,
      "Front_Court_Touches_per_Minute": 1.675070028,
      "Time_of_Possession_per_game__min": 4,
      "Total_Time_of_Possession": 100,
      "Close_Touches_per_game": 2.9,
      "Total_Close_Touches": 72.5,
      "Close_Touches_per_Minute": 0.081232493,
      "Elbow_Touches_per_game": 6.1,
      "Total_Elbow_Touches": 152.5,
      "Elbow_Touches_per_Minute": 0.1708683473,
      "PTS_Per_Touch": 0.35,
      "PTS_Per_Half_Court_Touch": 0.42
    };

    $scope.stats = {
      "Hollinger_MPG": {weight: 1},
      "Hollinger_PF": {weight:1},
      "Hollinger_PFPG": {weight:1},
      "Hollinger_PFP48M": {weight:1},
      "PF_per_MIN": {weight:1},
      "Hollinger_FLAG": {weight:1},
      "Hollinger_TECH": {weight:1},
      "Hollinger_EJECT": {weight:1},
      "GP": {weight:1},
      "MIN_per_game": {weight:1},
      "Total_MIN": {weight:1},
      "STL_per_game": {weight:1},
      "Total_STL": {weight:1},
      "STL_per_MIN": {weight:1},
      "BLK_per_game": {weight:1},
      "Total_BLK": {weight:1},
      "BLK_per_MIN": {weight:1},
      "Opp_FGM_at_Rim_per_game": {weight:1},
      "Total_Opp_FGM_at_Rim": {weight:1},
      "Opp_FGM_at_Rim_per_min": {weight:1},
      "Opp_FGA_at_Rim_per_game": {weight:1},
      "Total_Opp_FGA_at_Rim": {weight:1},
      "Opp_FGA_at_Rim_per_Minute": {weight:1},
      "Opp_FGP_at_Rim": {weight:1},
      "Catch_and_Shoot_Total_PTS": {weight:1},
      "Catch_and_Shoot_PTS_per_game": {weight:1},
      "Catch_and_Shoot_PTS_per_Minute": {weight:1},
      "Catch_and_Shoot_FGM_per_game": {weight:1},
      "Total_Catch_and_Shoot_FGM": {weight:1},
      "Catch_and_Shoot_FGM_per_Minute": {weight:1},
      "Catch_and_Shoot_FGA_per_game": {weight:1},
      "Total_Catch_and_Shoot_FGA": {weight:1},
      "Catch_and_Shoot_FGA_per_Minute": {weight:1},
      "Catch_and_Shoot_FG_PCT": {weight:1},
      "Catch_and_Shoot_3FGM_per_game": {weight:1},
      "Total_Catch_and_Shoot_3FGM": {weight:1},
      "Catch_and_Shoot_3FGM_per_Minute": {weight:1},
      "Catch_and_Shoot_3FGA_per_game": {weight:1},
      "Total_Catch_and_Shoot_3FGA": {weight:1},
      "Catch_and_Shoot_3FGA_per_Minute": {weight:1},
      "Catch_and_Shoot_3FG_PCT": {weight:1},
      "Catch_and_Shoot_eFG_PCT": {weight:1},
      "REB_per_game": {weight:1},
      "Total_REB": {weight:1},
      "REB_per_Minute": {weight:1},
      "Percentage_of_rebounds_per_chance": {weight:1},
      "REB_Chances_per_game": {weight:1},
      "Total_REB_Chances": {weight:1},
      "REB_Chances_per_Minute": {weight:1},
      "Contested_REB_per_game": {weight:1},
      "Total_Contested_REB": {weight:1},
      "Contested_REB_per_Minute": {weight:1},
      "Uncontested_REB_per_game": {weight:1},
      "Total_Uncontested_REB": {weight:1},
      "Uncontested_REB_per_Minute": {weight:1},
      "Contested_REB_Percentage": {weight:1},
      "Distance_Traveled_Per_Game_miles": {weight:1},
      "Distance_Traveled_total_miles": {weight:1},
      "Distance_Traveled_per_Minute": {weight:1},
      "Average_Speed_mph": {weight:1},
      "Distance_Traveled_Per_48_Minutes_miles": {weight:1},
      "Pull_Up_Shots_Total_PTS": {weight:1},
      "Pull_Up_Shots_PTS_per_game": {weight:1},
      "Pull_Up_Shots_PTS_per_Minute": {weight:1},
      "Pull_Up_Shots_FGM_per_game": {weight:1},
      "Total_Pull_Up_Shots_FGM": {weight:1},
      "Pull_Up_Shots_FGM_per_Minute": {weight:1},
      "Pull_Up_Shots_FGA_per_game": {weight:1},
      "Total_Pull_Up_Shots_FGA": {weight:1},
      "Pull_Up_Shots_FGA_per_Minute": {weight:1},
      "Pull_Up_Shots_FG_PCT": {weight:1},
      "Pull_Up_Shots_FG3M_per_game": {weight:1},
      "Total_Pull_Up_Shots_FG3M": {weight:1},
      "Pull_Up_Shots_FG3M_per_Minute": {weight:1},
      "Pull_Up_Shots_FG3A_per_game": {weight:1},
      "Total_Pull_Up_Shots_FG3A": {weight:1},
      "Pull_Up_Shots_FG3A_per_Minute": {weight:1},
      "Pull_Up_Shots_FG3_PCT": {weight:1},
      "Pull_Up_Shots_EFG_PCT": {weight:1},
      "PTS_per_game": {weight:1},
      "Total_PTS": {weight:1},
      "PTS_per_Minute": {weight:1},
      "Drives_PTS_per_game": {weight:1},
      "Total_Drives_PTS": {weight:1},
      "Drives_PTS_per_Minute": {weight:1},
      "Drives_FG_PCT": {weight:1},
      "Close_Shots_PTS_per_game": {weight:1},
      "Total_Close_Shots_PTS": {weight:1},
      "Close_Shots_PTS_per_Minute": {weight:1},
      "Close_Shots_FG_PCT": {weight:1},
      "Total_Catch_and_Shoot_PTS": {weight:1},
      "Total_Pull_Up_Shots_PTS": {weight:1},
      "eFG_PCT": {weight:1},
      "FG_PCT_on_Drives": {weight:1},
      "Drives_Per_Game": {weight:1},
      "Total_Drives": {weight:1},
      "Drives_per_Minute": {weight:1},
      "Player_PPG_on_Drives": {weight:1},
      "Total_Player_PTS_on_Drives": {weight:1},
      "Player_PTS_on_Drives_per_Minute": {weight:1},
      "Team_PPG_on_Drives": {weight:1},
      "Total_Team_Points_on_Drives": {weight:1},
      "Team_Points_on_Drives_per_Minute": {weight:1},
      "PTS_Per_48_Min_on_Drives": {weight:1},
      "AST_per_game": {weight:1},
      "Total_AST": {weight:1},
      "AST_per_Minute": {weight:1},
      "Passes_per_game": {weight:1},
      "Total_Passes": {weight:1},
      "Passes_per_Minute": {weight:1},
      "FT_Assists_per_game": {weight:1},
      "Total_FT_Assists": {weight:1},
      "FT_Assists_per_Minute": {weight:1},
      "Secondary_Assists_per_game": {weight:1},
      "Total_Secondary_Assists": {weight:1},
      "Secondary_Assists_per_Minute": {weight:1},
      "Assist_opportunities_per_game": {weight:1},
      "Total_Assist_opportunities": {weight:1},
      "Assist_opportunities_per_Minute": {weight:1},
      "Points_created_by_assist_per_game": {weight:1},
      "Total_Points_created_by_assist": {weight:1},
      "Points_created_by_assist_per_Minute": {weight:1},
      "Points_Created_by_AST_Per_48_Min": {weight:1},
      "Touches_per_game": {weight:1},
      "Total_Touches": {weight:1},
      "Touches_per_Minute": {weight:1},
      "Front_Court_Touches_per_game": {weight:1},
      "Total_Front_Court_Touches": {weight:1},
      "Front_Court_Touches_per_Minute": {weight:1},
      "Time_of_Possession_per_game__min": {weight:1},
      "Total_Time_of_Possession": {weight:1},
      "Close_Touches_per_game": {weight:1},
      "Total_Close_Touches": {weight:1},
      "Close_Touches_per_Minute": {weight:1},
      "Elbow_Touches_per_game": {weight:1},
      "Total_Elbow_Touches": {weight:1},
      "Elbow_Touches_per_Minute": {weight:1},
      "PTS_Per_Touch": {weight:1},
      "PTS_Per_Half_Court_Touch": {weight:1}
    };

    var teams = {
      "MIA":{
        "Players":[$scope.lebron],
        "Wins": 10,
        "Losses": 10,
        "STAR": 0
      }
    };

    $scope.options = {width: 500, height: 300, 'bar': 'aaa'};
    $scope.data = [1, 2, 3, 4];
    
    $scope.hovered = function(d){
      $scope.barValue = d;
      $scope.$apply();
    };

    $scope.barValue = 'None';

    $scope.calculatePlayerStar = function (player, weights) {
      player = player || $scope.lebron;
      weights = weights || $scope.stats;
      console.log(weights);
      var starStatistic = 0;
      for (key in weights){
        // starStatistic += player[key+"_adj"]*parseFloat(weights[key].weight);
        starStatistic += player[key]*parseFloat(weights[key].weight);
      }
      console.log(player["Total_MIN"]*starStatistic);
      return player["Total_MIN"]*starStatistic;
    };

  });